{% extends "base.html" %}
{% load static %}
{% load i18n %} {% block title %}
    {% trans "Головна сторінка" %} {% endblock title %}

{% block content %}
<style>
    .carousel-item img {
        width: 100%;
        height: 400px;
        object-fit: cover;
        object-position: center center;
    }

   body {
       {% if through_banner.is_active and through_banner.banner_component.first.image %}
        background-image: url('{{ through_banner.banner_component.first.image.url }}');
        background-repeat: repeat;
        background-attachment: scroll;
        background-size: 100% auto;
    {% else %}
        background: {{ through_banner.background|default:'#ffffff' }};
    {% endif %}
    }
</style>

<div class="banner">
    {% if top_banner %}
    <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="{{ top_banner.speed }}">
        <div class="carousel-inner">
            {% for component in top_banner.banner_component.all %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    {% if component.url %}<a href="{{ component.url }}">{% endif %}
                    {% if component.image %}
                        <img class="d-block w-100" src="{{ component.image.url }}" alt="{{ component.text|default:'Banner Image' }}">
                    {% endif %}
                    {% if component.url %}</a>{% endif %}

                    {% if component.text %}
                        <div class="carousel-caption d-none d-md-block">
                            <p>{{ component.text }}</p> </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        {% if top_banner.banner_component.count > 1 %}
            <a class="carousel-control-prev" href="#mainCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            </a>
            <a class="carousel-control-next" href="#mainCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
            </a>
        {% endif %}
    </div>
    {% endif %}
</div>

<div class="schedule mt-5">
    <p style="text-align: center; font-size: 24px; font-weight: bold; font-family: 'Arial', sans-serif;">
        {% trans "Дивіться сьогодні!" %} </p>

    <div class="container">
        <div class="row mb-5">
            {% for today_movie in today_movies %}
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="{{ today_movie.main_image.url }}" class="card-img-top" alt="{{ today_movie.title }}">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title fw-bold">{{ today_movie.title }}</h5>
                        <p class="card-text text-muted small">
                            {{ today_movie.description|truncatewords:20 }}
                        </p>
                        <a href="#" class="btn btn-primary mt-auto">{% trans "Купити квиток" %}</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <p style="text-align: center; font-size: 24px; font-weight: bold; font-family: 'Arial', sans-serif;">
        {% trans "Скоро на екранах!" %}
    </p>

    <div class="container">
        <div class="row mb-5">
            {% for recent_movie in recent_movies %}
            <div class="col-md-3 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="{{ recent_movie.main_image.url }}" class="card-img-top" alt="{{ recent_movie.title }}">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title fw-bold">{{ recent_movie.title }}</h5>
                        <p class="card-text text-muted small">
                            {{ recent_movie.description|truncatewords:20 }}
                        </p>
                        <a href="#" class="btn btn-primary mt-auto">{% trans "Купити квиток" %}</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="card mb-0 col-lg-9 shadow-sm" style="margin-top: 0; margin-bottom: 0; margin-left: auto; margin-right: auto;">
    <div class="card-header fw-bold bg-dark text-white">{% trans "Фотогалерея" %}</div>
    <div id="gallery-main" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            {% for image in news_or_actions.banner_component.all %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <img src="{{ image.image.url }}" class="d-block w-100" style="height: 450px; object-fit: cover;" alt="Gallery">
                </div>
            {% endfor %}
        </div>
        {% if news_or_actions.banner_component.count > 1 %}
            <button class="carousel-control-prev" type="button" data-target="#gallery-main" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-target="#gallery-main" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        {% endif %}
    </div>
</div>

<div class="SeoText py-5 mb-0">
    <div class="container text-center">
        <h2 class="fw-bold mb-3">{{ seo.title }}</h2>
        <div class="lead text-white">{{ seo.description|safe }}</div>
    </div>
</div>

{% endblock %}