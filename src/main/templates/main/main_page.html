{% extends "base.html" %}
{% load static %}
{% block title %} Головна сторінка {% endblock title %}

{% block content %}

    <style>
    .carousel-item img {
        width: 100%;
        height: 400px;

        object-fit: cover;

        object-position: center center;
    }

   body {
       {% if through_banner.is_active and through_banner.banner_component.first.image %}
        background-image: url('{{ through_banner.banner_component.first.image.url }}');
        background-repeat: repeat;
        background-attachment: scroll;
        background-size: 100% auto;
    {% else %}
        background: {{ through_banner.background|default:'#ffffff' }};
    {% endif %}
}
    </style>
<div class="banner">

    {% if top_banner %}

    <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="{{ top_banner.speed}}">
    <div class="carousel-inner">
        {% for component in top_banner.banner_component.all %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                {% if component.url %}
                    <a href="{{ component.url }}">
                {% endif %}

                {% if component.image %}
                    <img class="d-block w-100" src="{{ component.image.url }}" alt="{{ component.text|default:'Banner Image' }}">
                {% endif %}
                {% if component.url %}
                    </a>
                {% endif %}
                {% if component.text %}
                        <div class="carousel-caption d-none d-md-block">
                            <p>{{ component.text }}</p>
                        </div>
                    {% endif %}
            </div>
        {% endfor %}
    </div>

    {% if top_banner.banner_component.count > 1 %}
            <a class="carousel-control-prev" href="#mainCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
            <a class="carousel-control-next" href="#mainCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
        {% endif %}

    </div>

{% endif %}
</div>

<div class="schedule">
    <p style="text-align: center; font-size: 20px; font-family: 'Arial', sans-serif;">
        Дивіться сьогодні!
    </p>
    <div class="container">
        <div class="row mb-5">

            {% for today_movie in today_movies %}
            <div class="col-3">
                <div class="card">
                    <img src="{{ today_movie.main_image.url }}" alt="img">
                    <div class="card-body">
                        <h5 class="card-title">{{ today_movie.title }}</h5>
                        <p class="card-text">
                            {{ today_movie.description }}
                        </p>
                        <a href="#" class="btn btn-primary">Купити квиток</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

    </div>


    <p style="text-align: center; font-size: 20px; font-family: 'Arial', sans-serif;">
        Скоро на екранах!
    </p>
    <div class="container">
        <div class="row mb-5">

            {% for recent_movie in recent_movies %}
            <div class="col-3">
                <div class="card">
                    <img src="{{ recent_movie.main_image.url }}" alt="img">
                    <div class="card-body">
                        <h5 class="card-title">{{ recent_movie.title }}</h5>
                        <p class="card-text">
                            {{ recent_movie.description }}
                        </p>
                        <a href="#" class="btn btn-primary">Купити квиток</a>
                    </div>



                </div>
            </div>
            {% endfor %}

        </div>

    </div>

</div>

        <div class="card mb-3 col-lg-9 order-lg-2" style="margin: 0 auto">
  <div class="card-header fw-semibold">Фотогалерея</div>

  <div id="gallery-{{ news_or_action.id }}" class="carousel slide" data-ride="carousel" data-bs-interval="3000">

    <div class="carousel-indicators">
      {% for new_or_action in news_or_actions.banner_component.all %}
        <button type="button"
                data-target="#gallery-{{ news_or_action.id }}"
                data-slide-to="{{ forloop.counter0 }}"
                {% if forloop.first %}class="active"{% endif %}>
        </button>
      {% endfor %}
    </div>

    <div class="carousel-inner">
      {% for image in news_or_actions.banner_component.all %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <img src="{{ image.image.url }}" class="d-block w-100" alt="Слайд">
        </div>
      {% endfor %}
    </div>

    {% if news_or_actions.banner_component.count > 1 %}
      <a class="carousel-control-prev" href="#gallery-{{ news_or_actions.id }}" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#gallery-{{ news_or_actions.id }}" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    {% endif %}
  </div>
</div>


<div class="SeoText">
    <div class="container">
        <p style="text-align: center; font-size: 25px; font-family: 'Arial', sans-serif; margin-top: 20px">
            {{ seo.title }}
        </p>

        <p style="text-align: center; font-size: 20px; font-family: 'Arial', sans-serif;">
            {{ seo.description }}
        </p>
    </div>

</div>




{% endblock %}